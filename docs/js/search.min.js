/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
!function(t,e){"object"==typeof exports&&exports&&"string"!=typeof exports.nodeName?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):(t.Mustache={},e(t.Mustache))}(this,function(t){function e(t){return"function"==typeof t}function r(t){return m(t)?"array":typeof t}function n(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function i(t,e){return null!=t&&"object"==typeof t&&e in t}function s(t,e){return y.call(t,e)}function o(t){return!s(g,t)}function a(t){return String(t).replace(/[&<>"'`=\/]/g,function(t){return v[t]})}function h(e,r){function i(){if(g&&!v)for(;y.length;)delete f[y.pop()];else y=[];g=!1,v=!1}function s(t){if("string"==typeof t&&(t=t.split(b,2)),!m(t)||2!==t.length)throw new Error("Invalid tags: "+t);a=new RegExp(n(t[0])+"\\s*"),h=new RegExp("\\s*"+n(t[1])),l=new RegExp("\\s*"+n("}"+t[1]))}if(!e)return[];var a,h,l,d=[],f=[],y=[],g=!1,v=!1;s(r||t.tags);for(var A,k,P,E,T,Q,F=new c(e);!F.eos();){if(A=F.pos,P=F.scanUntil(a))for(var z=0,I=P.length;z<I;++z)E=P.charAt(z),o(E)?y.push(f.length):v=!0,f.push(["text",E,A,A+1]),A+=1,"\n"===E&&i();if(!F.scan(a))break;if(g=!0,k=F.scan(x)||"name",F.scan(_),"="===k?(P=F.scanUntil(w),F.scan(w),F.scanUntil(h)):"{"===k?(P=F.scanUntil(l),F.scan(S),F.scanUntil(h),k="&"):P=F.scanUntil(h),!F.scan(h))throw new Error("Unclosed tag at "+F.pos);if(T=[k,P,A,F.pos],f.push(T),"#"===k||"^"===k)d.push(T);else if("/"===k){if(Q=d.pop(),!Q)throw new Error('Unopened section "'+P+'" at '+A);if(Q[1]!==P)throw new Error('Unclosed section "'+Q[1]+'" at '+A)}else"name"===k||"{"===k||"&"===k?v=!0:"="===k&&s(P)}if(Q=d.pop())throw new Error('Unclosed section "'+Q[1]+'" at '+F.pos);return p(u(f))}function u(t){for(var e,r,n=[],i=0,s=t.length;i<s;++i)e=t[i],e&&("text"===e[0]&&r&&"text"===r[0]?(r[1]+=e[1],r[3]=e[3]):(n.push(e),r=e));return n}function p(t){for(var e,r,n=[],i=n,s=[],o=0,a=t.length;o<a;++o)switch(e=t[o],e[0]){case"#":case"^":i.push(e),s.push(e),i=e[4]=[];break;case"/":r=s.pop(),r[5]=e[2],i=s.length>0?s[s.length-1][4]:n;break;default:i.push(e)}return n}function c(t){this.string=t,this.tail=t,this.pos=0}function l(t,e){this.view=t,this.cache={".":this.view},this.parent=e}function d(){this.cache={}}var f=Object.prototype.toString,m=Array.isArray||function(t){return"[object Array]"===f.call(t)},y=RegExp.prototype.test,g=/\S/,v={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},_=/\s*/,b=/\s+/,w=/\s*=/,S=/\s*\}/,x=/#|\^|\/|>|\{|&|=|!/;c.prototype.eos=function(){return""===this.tail},c.prototype.scan=function(t){var e=this.tail.match(t);if(!e||0!==e.index)return"";var r=e[0];return this.tail=this.tail.substring(r.length),this.pos+=r.length,r},c.prototype.scanUntil=function(t){var e,r=this.tail.search(t);switch(r){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,r),this.tail=this.tail.substring(r)}return this.pos+=e.length,e},l.prototype.push=function(t){return new l(t,this)},l.prototype.lookup=function(t){var r,n=this.cache;if(n.hasOwnProperty(t))r=n[t];else{for(var s,o,a=this,h=!1;a;){if(t.indexOf(".")>0)for(r=a.view,s=t.split("."),o=0;null!=r&&o<s.length;)o===s.length-1&&(h=i(r,s[o])),r=r[s[o++]];else r=a.view[t],h=i(a.view,t);if(h)break;a=a.parent}n[t]=r}return e(r)&&(r=r.call(this.view)),r},d.prototype.clearCache=function(){this.cache={}},d.prototype.parse=function(t,e){var r=this.cache,n=r[t];return null==n&&(n=r[t]=h(t,e)),n},d.prototype.render=function(t,e,r){var n=this.parse(t),i=e instanceof l?e:new l(e);return this.renderTokens(n,i,r,t)},d.prototype.renderTokens=function(t,e,r,n){for(var i,s,o,a="",h=0,u=t.length;h<u;++h)o=void 0,i=t[h],s=i[0],"#"===s?o=this.renderSection(i,e,r,n):"^"===s?o=this.renderInverted(i,e,r,n):">"===s?o=this.renderPartial(i,e,r,n):"&"===s?o=this.unescapedValue(i,e):"name"===s?o=this.escapedValue(i,e):"text"===s&&(o=this.rawValue(i)),void 0!==o&&(a+=o);return a},d.prototype.renderSection=function(t,r,n,i){function s(t){return o.render(t,r,n)}var o=this,a="",h=r.lookup(t[1]);if(h){if(m(h))for(var u=0,p=h.length;u<p;++u)a+=this.renderTokens(t[4],r.push(h[u]),n,i);else if("object"==typeof h||"string"==typeof h||"number"==typeof h)a+=this.renderTokens(t[4],r.push(h),n,i);else if(e(h)){if("string"!=typeof i)throw new Error("Cannot use higher-order sections without the original template");h=h.call(r.view,i.slice(t[3],t[5]),s),null!=h&&(a+=h)}else a+=this.renderTokens(t[4],r,n,i);return a}},d.prototype.renderInverted=function(t,e,r,n){var i=e.lookup(t[1]);if(!i||m(i)&&0===i.length)return this.renderTokens(t[4],e,r,n)},d.prototype.renderPartial=function(t,r,n){if(n){var i=e(n)?n(t[1]):n[t[1]];return null!=i?this.renderTokens(this.parse(i),r,n,i):void 0}},d.prototype.unescapedValue=function(t,e){var r=e.lookup(t[1]);if(null!=r)return r},d.prototype.escapedValue=function(e,r){var n=r.lookup(e[1]);if(null!=n)return t.escape(n)},d.prototype.rawValue=function(t){return t[1]},t.name="mustache.js",t.version="2.3.0",t.tags=["{{","}}"];var A=new d;return t.clearCache=function(){return A.clearCache()},t.parse=function(t,e){return A.parse(t,e)},t.render=function(t,e,n){if("string"!=typeof t)throw new TypeError('Invalid template! Template should be a "string" but "'+r(t)+'" was given as the first argument for mustache#render(template, view, partials)');return A.render(t,e,n)},t.to_html=function(r,n,i,s){var o=t.render(r,n,i);return e(s)?void s(o):o},t.escape=a,t.Scanner=c,t.Context=l,t.Writer=d,t});var dateFormat=function(){var t=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,e=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,r=/[^-+\dA-Z]/g,n=function(t,e){for(t=String(t),e=e||2;t.length<e;)t="0"+t;return t};return function(i,s,o){var a=dateFormat;if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(i)||/\d/.test(i)||(s=i,i=void 0),i=i?new Date(i):new Date,isNaN(i))throw SyntaxError("invalid date");s=String(a.masks[s]||s||a.masks["default"]),"UTC:"==s.slice(0,4)&&(s=s.slice(4),o=!0);var h=o?"getUTC":"get",u=i[h+"Date"](),p=i[h+"Day"](),c=i[h+"Month"](),l=i[h+"FullYear"](),d=i[h+"Hours"](),f=i[h+"Minutes"](),m=i[h+"Seconds"](),y=i[h+"Milliseconds"](),g=o?0:i.getTimezoneOffset(),v={d:u,dd:n(u),ddd:a.i18n.dayNames[p],dddd:a.i18n.dayNames[p+7],m:c+1,mm:n(c+1),mmm:a.i18n.monthNames[c],mmmm:a.i18n.monthNames[c+12],yy:String(l).slice(2),yyyy:l,h:d%12||12,hh:n(d%12||12),H:d,HH:n(d),M:f,MM:n(f),s:m,ss:n(m),l:n(y,3),L:n(y>99?Math.round(y/10):y),t:d<12?"a":"p",tt:d<12?"am":"pm",T:d<12?"A":"P",TT:d<12?"AM":"PM",Z:o?"UTC":(String(i).match(e)||[""]).pop().replace(r,""),o:(g>0?"-":"+")+n(100*Math.floor(Math.abs(g)/60)+Math.abs(g)%60,4),S:["th","st","nd","rd"][u%10>3?0:(u%100-u%10!=10)*u%10]};return s.replace(t,function(t){return t in v?v[t]:t.slice(1,t.length-1)})}}();dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},Date.prototype.format=function(t,e){return dateFormat(this,t,e)},/*!
 * URI.js - Mutating URLs
 *
 * Version: 1.18.4
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */
function(t,e){"use strict";"object"==typeof module&&module.exports?module.exports=e(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):"function"==typeof define&&define.amd?define(["./punycode","./IPv6","./SecondLevelDomains"],e):t.URI=e(t.punycode,t.IPv6,t.SecondLevelDomains,t)}(this,function(t,e,r,n){"use strict";function i(t,e){var r=arguments.length>=1,n=arguments.length>=2;if(!(this instanceof i))return r?n?new i(t,e):new i(t):new i;if(void 0===t){if(r)throw new TypeError("undefined is not a valid argument for URI");t="undefined"!=typeof location?location.href+"":""}return this.href(t),void 0!==e?this.absoluteTo(e):this}function s(t){return t.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function o(t){return void 0===t?"Undefined":String(Object.prototype.toString.call(t)).slice(8,-1)}function a(t){return"Array"===o(t)}function h(t,e){var r,n,i={};if("RegExp"===o(e))i=null;else if(a(e))for(r=0,n=e.length;r<n;r++)i[e[r]]=!0;else i[e]=!0;for(r=0,n=t.length;r<n;r++){var s=i&&void 0!==i[t[r]]||!i&&e.test(t[r]);s&&(t.splice(r,1),n--,r--)}return t}function u(t,e){var r,n;if(a(e)){for(r=0,n=e.length;r<n;r++)if(!u(t,e[r]))return!1;return!0}var i=o(e);for(r=0,n=t.length;r<n;r++)if("RegExp"===i){if("string"==typeof t[r]&&t[r].match(e))return!0}else if(t[r]===e)return!0;return!1}function p(t,e){if(!a(t)||!a(e))return!1;if(t.length!==e.length)return!1;t.sort(),e.sort();for(var r=0,n=t.length;r<n;r++)if(t[r]!==e[r])return!1;return!0}function c(t){var e=/^\/+|\/+$/g;return t.replace(e,"")}function l(t){return escape(t)}function d(t){return encodeURIComponent(t).replace(/[!'()*]/g,l).replace(/\*/g,"%2A")}function f(t){return function(e,r){return void 0===e?this._parts[t]||"":(this._parts[t]=e||null,this.build(!r),this)}}function m(t,e){return function(r,n){return void 0===r?this._parts[t]||"":(null!==r&&(r+="",r.charAt(0)===e&&(r=r.substring(1))),this._parts[t]=r,this.build(!n),this)}}var y=n&&n.URI;i.version="1.18.4";var g=i.prototype,v=Object.prototype.hasOwnProperty;i._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:i.duplicateQueryParameters,escapeQuerySpace:i.escapeQuerySpace}},i.duplicateQueryParameters=!1,i.escapeQuerySpace=!0,i.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,i.idn_expression=/[^a-z0-9\.-]/i,i.punycode_expression=/(xn--)/i,i.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,i.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,i.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\xab\xbb\u201c\u201d\u2018\u2019]))/gi,i.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?\xab\xbb\u201c\u201d\u201e\u2018\u2019]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},i.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},i.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/,i.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},i.getDomAttribute=function(t){if(t&&t.nodeName){var e=t.nodeName.toLowerCase();if("input"!==e||"image"===t.type)return i.domAttributes[e]}},i.encode=d,i.decode=decodeURIComponent,i.iso8859=function(){i.encode=escape,i.decode=unescape},i.unicode=function(){i.encode=d,i.decode=decodeURIComponent},i.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/gi,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},i.encodeQuery=function(t,e){var r=i.encode(t+"");return void 0===e&&(e=i.escapeQuerySpace),e?r.replace(/%20/g,"+"):r},i.decodeQuery=function(t,e){t+="",void 0===e&&(e=i.escapeQuerySpace);try{return i.decode(e?t.replace(/\+/g,"%20"):t)}catch(e){return t}};var _,b={encode:"encode",decode:"decode"},w=function(t,e){return function(r){try{return i[e](r+"").replace(i.characters[t][e].expression,function(r){return i.characters[t][e].map[r]})}catch(t){return r}}};for(_ in b)i[_+"PathSegment"]=w("pathname",b[_]),i[_+"UrnPathSegment"]=w("urnpath",b[_]);var S=function(t,e,r){return function(n){var s;s=r?function(t){return i[e](i[r](t))}:i[e];for(var o=(n+"").split(t),a=0,h=o.length;a<h;a++)o[a]=s(o[a]);return o.join(t)}};i.decodePath=S("/","decodePathSegment"),i.decodeUrnPath=S(":","decodeUrnPathSegment"),i.recodePath=S("/","encodePathSegment","decode"),i.recodeUrnPath=S(":","encodeUrnPathSegment","decode"),i.encodeReserved=w("reserved","encode"),i.parse=function(t,e){var r;return e||(e={}),r=t.indexOf("#"),r>-1&&(e.fragment=t.substring(r+1)||null,t=t.substring(0,r)),r=t.indexOf("?"),r>-1&&(e.query=t.substring(r+1)||null,t=t.substring(0,r)),"//"===t.substring(0,2)?(e.protocol=null,t=t.substring(2),t=i.parseAuthority(t,e)):(r=t.indexOf(":"),r>-1&&(e.protocol=t.substring(0,r)||null,e.protocol&&!e.protocol.match(i.protocol_expression)?e.protocol=void 0:"//"===t.substring(r+1,r+3)?(t=t.substring(r+3),t=i.parseAuthority(t,e)):(t=t.substring(r+1),e.urn=!0))),e.path=t,e},i.parseHost=function(t,e){t=t.replace(/\\/g,"/");var r,n,i=t.indexOf("/");if(i===-1&&(i=t.length),"["===t.charAt(0))r=t.indexOf("]"),e.hostname=t.substring(1,r)||null,e.port=t.substring(r+2,i)||null,"/"===e.port&&(e.port=null);else{var s=t.indexOf(":"),o=t.indexOf("/"),a=t.indexOf(":",s+1);a!==-1&&(o===-1||a<o)?(e.hostname=t.substring(0,i)||null,e.port=null):(n=t.substring(0,i).split(":"),e.hostname=n[0]||null,e.port=n[1]||null)}return e.hostname&&"/"!==t.substring(i).charAt(0)&&(i++,t="/"+t),t.substring(i)||"/"},i.parseAuthority=function(t,e){return t=i.parseUserinfo(t,e),i.parseHost(t,e)},i.parseUserinfo=function(t,e){var r,n=t.indexOf("/"),s=t.lastIndexOf("@",n>-1?n:t.length-1);return s>-1&&(n===-1||s<n)?(r=t.substring(0,s).split(":"),e.username=r[0]?i.decode(r[0]):null,r.shift(),e.password=r[0]?i.decode(r.join(":")):null,t=t.substring(s+1)):(e.username=null,e.password=null),t},i.parseQuery=function(t,e){if(!t)return{};if(t=t.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!t)return{};for(var r,n,s,o={},a=t.split("&"),h=a.length,u=0;u<h;u++)r=a[u].split("="),n=i.decodeQuery(r.shift(),e),s=r.length?i.decodeQuery(r.join("="),e):null,v.call(o,n)?("string"!=typeof o[n]&&null!==o[n]||(o[n]=[o[n]]),o[n].push(s)):o[n]=s;return o},i.build=function(t){var e="";return t.protocol&&(e+=t.protocol+":"),t.urn||!e&&!t.hostname||(e+="//"),e+=i.buildAuthority(t)||"","string"==typeof t.path&&("/"!==t.path.charAt(0)&&"string"==typeof t.hostname&&(e+="/"),e+=t.path),"string"==typeof t.query&&t.query&&(e+="?"+t.query),"string"==typeof t.fragment&&t.fragment&&(e+="#"+t.fragment),e},i.buildHost=function(t){var e="";return t.hostname?(e+=i.ip6_expression.test(t.hostname)?"["+t.hostname+"]":t.hostname,t.port&&(e+=":"+t.port),e):""},i.buildAuthority=function(t){return i.buildUserinfo(t)+i.buildHost(t)},i.buildUserinfo=function(t){var e="";return t.username&&(e+=i.encode(t.username)),t.password&&(e+=":"+i.encode(t.password)),e&&(e+="@"),e},i.buildQuery=function(t,e,r){var n,s,o,h,u="";for(s in t)if(v.call(t,s)&&s)if(a(t[s]))for(n={},o=0,h=t[s].length;o<h;o++)void 0!==t[s][o]&&void 0===n[t[s][o]+""]&&(u+="&"+i.buildQueryParameter(s,t[s][o],r),e!==!0&&(n[t[s][o]+""]=!0));else void 0!==t[s]&&(u+="&"+i.buildQueryParameter(s,t[s],r));return u.substring(1)},i.buildQueryParameter=function(t,e,r){return i.encodeQuery(t,r)+(null!==e?"="+i.encodeQuery(e,r):"")},i.addQuery=function(t,e,r){if("object"==typeof e)for(var n in e)v.call(e,n)&&i.addQuery(t,n,e[n]);else{if("string"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===t[e])return void(t[e]=r);"string"==typeof t[e]&&(t[e]=[t[e]]),a(r)||(r=[r]),t[e]=(t[e]||[]).concat(r)}},i.removeQuery=function(t,e,r){var n,s,u;if(a(e))for(n=0,s=e.length;n<s;n++)t[e[n]]=void 0;else if("RegExp"===o(e))for(u in t)e.test(u)&&(t[u]=void 0);else if("object"==typeof e)for(u in e)v.call(e,u)&&i.removeQuery(t,u,e[u]);else{if("string"!=typeof e)throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter");void 0!==r?"RegExp"===o(r)?!a(t[e])&&r.test(t[e])?t[e]=void 0:t[e]=h(t[e],r):t[e]!==String(r)||a(r)&&1!==r.length?a(t[e])&&(t[e]=h(t[e],r)):t[e]=void 0:t[e]=void 0}},i.hasQuery=function(t,e,r,n){switch(o(e)){case"String":break;case"RegExp":for(var s in t)if(v.call(t,s)&&e.test(s)&&(void 0===r||i.hasQuery(t,s,r)))return!0;return!1;case"Object":for(var h in e)if(v.call(e,h)&&!i.hasQuery(t,h,e[h]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(o(r)){case"Undefined":return e in t;case"Boolean":var c=Boolean(a(t[e])?t[e].length:t[e]);return r===c;case"Function":return!!r(t[e],e,t);case"Array":if(!a(t[e]))return!1;var l=n?u:p;return l(t[e],r);case"RegExp":return a(t[e])?!!n&&u(t[e],r):Boolean(t[e]&&t[e].match(r));case"Number":r=String(r);case"String":return a(t[e])?!!n&&u(t[e],r):t[e]===r;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},i.joinPaths=function(){for(var t=[],e=[],r=0,n=0;n<arguments.length;n++){var s=new i(arguments[n]);t.push(s);for(var o=s.segment(),a=0;a<o.length;a++)"string"==typeof o[a]&&e.push(o[a]),o[a]&&r++}if(!e.length||!r)return new i("");var h=new i("").segment(e);return""!==t[0].path()&&"/"!==t[0].path().slice(0,1)||h.path("/"+h.path()),h.normalize()},i.commonPath=function(t,e){var r,n=Math.min(t.length,e.length);for(r=0;r<n;r++)if(t.charAt(r)!==e.charAt(r)){r--;break}return r<1?t.charAt(0)===e.charAt(0)&&"/"===t.charAt(0)?"/":"":("/"===t.charAt(r)&&"/"===e.charAt(r)||(r=t.substring(0,r).lastIndexOf("/")),t.substring(0,r+1))},i.withinString=function(t,e,r){r||(r={});var n=r.start||i.findUri.start,s=r.end||i.findUri.end,o=r.trim||i.findUri.trim,a=r.parens||i.findUri.parens,h=/[a-z0-9-]=["']?$/i;for(n.lastIndex=0;;){var u=n.exec(t);if(!u)break;var p=u.index;if(r.ignoreHtml){var c=t.slice(Math.max(p-3,0),p);if(c&&h.test(c))continue}for(var l=p+t.slice(p).search(s),d=t.slice(p,l),f=-1;;){var m=a.exec(d);if(!m)break;var y=m.index+m[0].length;f=Math.max(f,y)}if(d=f>-1?d.slice(0,f)+d.slice(f+1).replace(o,""):d.replace(o,""),!r.ignore||!r.ignore.test(d)){l=p+d.length;var g=e(d,p,l,t);void 0!==g?(g=String(g),t=t.slice(0,p)+g+t.slice(l),n.lastIndex=p+g.length):n.lastIndex=l}}return n.lastIndex=0,t},i.ensureValidHostname=function(e){if(e.match(i.invalid_hostname_characters)){if(!t)throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-] and Punycode.js is not available');if(t.toASCII(e).match(i.invalid_hostname_characters))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]')}},i.noConflict=function(t){if(t){var e={URI:this.noConflict()};return n.URITemplate&&"function"==typeof n.URITemplate.noConflict&&(e.URITemplate=n.URITemplate.noConflict()),n.IPv6&&"function"==typeof n.IPv6.noConflict&&(e.IPv6=n.IPv6.noConflict()),n.SecondLevelDomains&&"function"==typeof n.SecondLevelDomains.noConflict&&(e.SecondLevelDomains=n.SecondLevelDomains.noConflict()),e}return n.URI===this&&(n.URI=y),this},g.build=function(t){return t===!0?this._deferred_build=!0:(void 0===t||this._deferred_build)&&(this._string=i.build(this._parts),this._deferred_build=!1),this},g.clone=function(){return new i(this)},g.valueOf=g.toString=function(){return this.build(!1)._string},g.protocol=f("protocol"),g.username=f("username"),g.password=f("password"),g.hostname=f("hostname"),g.port=f("port"),g.query=m("query","?"),g.fragment=m("fragment","#"),g.search=function(t,e){var r=this.query(t,e);return"string"==typeof r&&r.length?"?"+r:r},g.hash=function(t,e){var r=this.fragment(t,e);return"string"==typeof r&&r.length?"#"+r:r},g.pathname=function(t,e){if(void 0===t||t===!0){var r=this._parts.path||(this._parts.hostname?"/":"");return t?(this._parts.urn?i.decodeUrnPath:i.decodePath)(r):r}return this._parts.urn?this._parts.path=t?i.recodeUrnPath(t):"":this._parts.path=t?i.recodePath(t):"/",this.build(!e),this},g.path=g.pathname,g.href=function(t,e){var r;if(void 0===t)return this.toString();this._string="",this._parts=i._parts();var n=t instanceof i,s="object"==typeof t&&(t.hostname||t.path||t.pathname);if(t.nodeName){var o=i.getDomAttribute(t);t=t[o]||"",s=!1}if(!n&&s&&void 0!==t.pathname&&(t=t.toString()),"string"==typeof t||t instanceof String)this._parts=i.parse(String(t),this._parts);else{if(!n&&!s)throw new TypeError("invalid input");var a=n?t._parts:t;for(r in a)v.call(this._parts,r)&&(this._parts[r]=a[r])}return this.build(!e),this},g.is=function(t){var e=!1,n=!1,s=!1,o=!1,a=!1,h=!1,u=!1,p=!this._parts.urn;switch(this._parts.hostname&&(p=!1,n=i.ip4_expression.test(this._parts.hostname),s=i.ip6_expression.test(this._parts.hostname),e=n||s,o=!e,a=o&&r&&r.has(this._parts.hostname),h=o&&i.idn_expression.test(this._parts.hostname),u=o&&i.punycode_expression.test(this._parts.hostname)),t.toLowerCase()){case"relative":return p;case"absolute":return!p;case"domain":case"name":return o;case"sld":return a;case"ip":return e;case"ip4":case"ipv4":case"inet4":return n;case"ip6":case"ipv6":case"inet6":return s;case"idn":return h;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return u}return null};var x=g.protocol,A=g.port,k=g.hostname;g.protocol=function(t,e){if(void 0!==t&&t&&(t=t.replace(/:(\/\/)?$/,""),!t.match(i.protocol_expression)))throw new TypeError('Protocol "'+t+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return x.call(this,t,e)},g.scheme=g.protocol,g.port=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0!==t&&(0===t&&(t=null),t&&(t+="",":"===t.charAt(0)&&(t=t.substring(1)),t.match(/[^0-9]/))))throw new TypeError('Port "'+t+'" contains characters other than [0-9]');return A.call(this,t,e)},g.hostname=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0!==t){var r={},n=i.parseHost(t,r);if("/"!==n)throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');t=r.hostname}return k.call(this,t,e)},g.origin=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){var r=this.protocol(),n=this.authority();return n?(r?r+"://":"")+this.authority():""}var s=i(t);return this.protocol(s.protocol()).authority(s.authority()).build(!e),this},g.host=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t)return this._parts.hostname?i.buildHost(this._parts):"";var r=i.parseHost(t,this._parts);if("/"!==r)throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');return this.build(!e),this},g.authority=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t)return this._parts.hostname?i.buildAuthority(this._parts):"";var r=i.parseAuthority(t,this._parts);if("/"!==r)throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');return this.build(!e),this},g.userinfo=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){var r=i.buildUserinfo(this._parts);return r?r.substring(0,r.length-1):r}return"@"!==t[t.length-1]&&(t+="@"),i.parseUserinfo(t,this._parts),this.build(!e),this},g.resource=function(t,e){var r;return void 0===t?this.path()+this.search()+this.hash():(r=i.parse(t),this._parts.path=r.path,this._parts.query=r.query,this._parts.fragment=r.fragment,this.build(!e),this)},g.subdomain=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,r)||""}var n=this._parts.hostname.length-this.domain().length,o=this._parts.hostname.substring(0,n),a=new RegExp("^"+s(o));return t&&"."!==t.charAt(t.length-1)&&(t+="."),t&&i.ensureValidHostname(t),this._parts.hostname=this._parts.hostname.replace(a,t),this.build(!e),this},g.domain=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.match(/\./g);if(r&&r.length<2)return this._parts.hostname;var n=this._parts.hostname.length-this.tld(e).length-1;return n=this._parts.hostname.lastIndexOf(".",n-1)+1,this._parts.hostname.substring(n)||""}if(!t)throw new TypeError("cannot set domain empty");if(i.ensureValidHostname(t),!this._parts.hostname||this.is("IP"))this._parts.hostname=t;else{var o=new RegExp(s(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(o,t)}return this.build(!e),this},g.tld=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.lastIndexOf("."),i=this._parts.hostname.substring(n+1);return e!==!0&&r&&r.list[i.toLowerCase()]?r.get(this._parts.hostname)||i:i}var o;if(!t)throw new TypeError("cannot set TLD empty");if(t.match(/[^a-zA-Z0-9-]/)){if(!r||!r.is(t))throw new TypeError('TLD "'+t+'" contains characters other than [A-Z0-9]');o=new RegExp(s(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(o,t)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");o=new RegExp(s(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(o,t)}return this.build(!e),this},g.directory=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||t===!0){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var r=this._parts.path.length-this.filename().length-1,n=this._parts.path.substring(0,r)||(this._parts.hostname?"/":"");return t?i.decodePath(n):n}var o=this._parts.path.length-this.filename().length,a=this._parts.path.substring(0,o),h=new RegExp("^"+s(a));return this.is("relative")||(t||(t="/"),"/"!==t.charAt(0)&&(t="/"+t)),t&&"/"!==t.charAt(t.length-1)&&(t+="/"),t=i.recodePath(t),this._parts.path=this._parts.path.replace(h,t),this.build(!e),this},g.filename=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||t===!0){if(!this._parts.path||"/"===this._parts.path)return"";var r=this._parts.path.lastIndexOf("/"),n=this._parts.path.substring(r+1);return t?i.decodePathSegment(n):n}var o=!1;"/"===t.charAt(0)&&(t=t.substring(1)),t.match(/\.?\//)&&(o=!0);var a=new RegExp(s(this.filename())+"$");return t=i.recodePath(t),this._parts.path=this._parts.path.replace(a,t),o?this.normalizePath(e):this.build(!e),this},g.suffix=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||t===!0){if(!this._parts.path||"/"===this._parts.path)return"";var r,n,o=this.filename(),a=o.lastIndexOf(".");return a===-1?"":(r=o.substring(a+1),n=/^[a-z0-9%]+$/i.test(r)?r:"",t?i.decodePathSegment(n):n)}"."===t.charAt(0)&&(t=t.substring(1));var h,u=this.suffix();if(u)h=t?new RegExp(s(u)+"$"):new RegExp(s("."+u)+"$");else{if(!t)return this;this._parts.path+="."+i.recodePath(t)}return h&&(t=i.recodePath(t),this._parts.path=this._parts.path.replace(h,t)),this.build(!e),this},g.segment=function(t,e,r){var n=this._parts.urn?":":"/",i=this.path(),s="/"===i.substring(0,1),o=i.split(n);if(void 0!==t&&"number"!=typeof t&&(r=e,e=t,t=void 0),void 0!==t&&"number"!=typeof t)throw new Error('Bad segment "'+t+'", must be 0-based integer');if(s&&o.shift(),t<0&&(t=Math.max(o.length+t,0)),void 0===e)return void 0===t?o:o[t];if(null===t||void 0===o[t])if(a(e)){o=[];for(var h=0,u=e.length;h<u;h++)(e[h].length||o.length&&o[o.length-1].length)&&(o.length&&!o[o.length-1].length&&o.pop(),o.push(c(e[h])))}else(e||"string"==typeof e)&&(e=c(e),""===o[o.length-1]?o[o.length-1]=e:o.push(e));else e?o[t]=c(e):o.splice(t,1);return s&&o.unshift(""),this.path(o.join(n),r)},g.segmentCoded=function(t,e,r){var n,s,o;if("number"!=typeof t&&(r=e,e=t,t=void 0),void 0===e){if(n=this.segment(t,e,r),a(n))for(s=0,o=n.length;s<o;s++)n[s]=i.decode(n[s]);else n=void 0!==n?i.decode(n):void 0;return n}if(a(e))for(s=0,o=e.length;s<o;s++)e[s]=i.encode(e[s]);else e="string"==typeof e||e instanceof String?i.encode(e):e;return this.segment(t,e,r)};var P=g.query;return g.query=function(t,e){if(t===!0)return i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof t){var r=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace),n=t.call(this,r);return this._parts.query=i.buildQuery(n||r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!e),this}return void 0!==t&&"string"!=typeof t?(this._parts.query=i.buildQuery(t,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!e),this):P.call(this,t,e)},g.setQuery=function(t,e,r){var n=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"==typeof t||t instanceof String)n[t]=void 0!==e?e:null;else{if("object"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");for(var s in t)v.call(t,s)&&(n[s]=t[s])}return this._parts.query=i.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(r=e),this.build(!r),this},g.addQuery=function(t,e,r){var n=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return i.addQuery(n,t,void 0===e?null:e),this._parts.query=i.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(r=e),this.build(!r),this},g.removeQuery=function(t,e,r){var n=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return i.removeQuery(n,t,e),this._parts.query=i.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(r=e),this.build(!r),this},g.hasQuery=function(t,e,r){var n=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return i.hasQuery(n,t,e,r)},g.setSearch=g.setQuery,g.addSearch=g.addQuery,g.removeSearch=g.removeQuery,g.hasSearch=g.hasQuery,g.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},g.normalizeProtocol=function(t){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!t)),this},g.normalizeHostname=function(r){return this._parts.hostname&&(this.is("IDN")&&t?this._parts.hostname=t.toASCII(this._parts.hostname):this.is("IPv6")&&e&&(this._parts.hostname=e.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!r)),this},g.normalizePort=function(t){return"string"==typeof this._parts.protocol&&this._parts.port===i.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!t)),this},g.normalizePath=function(t){var e=this._parts.path;if(!e)return this;if(this._parts.urn)return this._parts.path=i.recodeUrnPath(this._parts.path),this.build(!t),this;if("/"===this._parts.path)return this;e=i.recodePath(e);var r,n,s,o="";for("/"!==e.charAt(0)&&(r=!0,e="/"+e),"/.."!==e.slice(-3)&&"/."!==e.slice(-2)||(e+="/"),e=e.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),r&&(o=e.substring(1).match(/^(\.\.\/)+/)||"",o&&(o=o[0]));;){if(n=e.search(/\/\.\.(\/|$)/),n===-1)break;0!==n?(s=e.substring(0,n).lastIndexOf("/"),s===-1&&(s=n),e=e.substring(0,s)+e.substring(n+3)):e=e.substring(3)}return r&&this.is("relative")&&(e=o+e.substring(1)),this._parts.path=e,this.build(!t),this},g.normalizePathname=g.normalizePath,g.normalizeQuery=function(t){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(i.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!t)),this},g.normalizeFragment=function(t){return this._parts.fragment||(this._parts.fragment=null,this.build(!t)),this},g.normalizeSearch=g.normalizeQuery,g.normalizeHash=g.normalizeFragment,g.iso8859=function(){var t=i.encode,e=i.decode;i.encode=escape,i.decode=decodeURIComponent;try{this.normalize()}finally{i.encode=t,i.decode=e}return this},g.unicode=function(){var t=i.encode,e=i.decode;i.encode=d,i.decode=unescape;try{this.normalize()}finally{i.encode=t,i.decode=e}return this},g.readable=function(){var e=this.clone();e.username("").password("").normalize();var r="";if(e._parts.protocol&&(r+=e._parts.protocol+"://"),e._parts.hostname&&(e.is("punycode")&&t?(r+=t.toUnicode(e._parts.hostname),e._parts.port&&(r+=":"+e._parts.port)):r+=e.host()),e._parts.hostname&&e._parts.path&&"/"!==e._parts.path.charAt(0)&&(r+="/"),r+=e.path(!0),e._parts.query){for(var n="",s=0,o=e._parts.query.split("&"),a=o.length;s<a;s++){var h=(o[s]||"").split("=");n+="&"+i.decodeQuery(h[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==h[1]&&(n+="="+i.decodeQuery(h[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}r+="?"+n.substring(1)}return r+=i.decodeQuery(e.hash(),!0)},g.absoluteTo=function(t){var e,r,n,s=this.clone(),o=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t instanceof i||(t=new i(t)),s._parts.protocol||(s._parts.protocol=t._parts.protocol),this._parts.hostname)return s;for(r=0;n=o[r];r++)s._parts[n]=t._parts[n];return s._parts.path?(".."===s._parts.path.substring(-2)&&(s._parts.path+="/"),"/"!==s.path().charAt(0)&&(e=t.directory(),e=e?e:0===t.path().indexOf("/")?"/":"",s._parts.path=(e?e+"/":"")+s._parts.path,s.normalizePath())):(s._parts.path=t._parts.path,s._parts.query||(s._parts.query=t._parts.query)),s.build(),s},g.relativeTo=function(t){var e,r,n,s,o,a=this.clone().normalize();if(a._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t=new i(t).normalize(),e=a._parts,r=t._parts,s=a.path(),o=t.path(),"/"!==s.charAt(0))throw new Error("URI is already relative");if("/"!==o.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(e.protocol===r.protocol&&(e.protocol=null),e.username!==r.username||e.password!==r.password)return a.build();if(null!==e.protocol||null!==e.username||null!==e.password)return a.build();if(e.hostname!==r.hostname||e.port!==r.port)return a.build();if(e.hostname=null,e.port=null,s===o)return e.path="",a.build();if(n=i.commonPath(s,o),!n)return a.build();var h=r.path.substring(n.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return e.path=h+e.path.substring(n.length)||"./",a.build()},g.equals=function(t){var e,r,n,s=this.clone(),o=new i(t),h={},u={},c={};if(s.normalize(),o.normalize(),s.toString()===o.toString())return!0;if(e=s.query(),r=o.query(),s.query(""),o.query(""),s.toString()!==o.toString())return!1;if(e.length!==r.length)return!1;h=i.parseQuery(e,this._parts.escapeQuerySpace),u=i.parseQuery(r,this._parts.escapeQuerySpace);for(n in h)if(v.call(h,n)){if(a(h[n])){if(!p(h[n],u[n]))return!1}else if(h[n]!==u[n])return!1;c[n]=!0}for(n in u)if(v.call(u,n)&&!c[n])return!1;return!0},g.duplicateQueryParameters=function(t){return this._parts.duplicateQueryParameters=!!t,this},g.escapeQuerySpace=function(t){return this._parts.escapeQuerySpace=!!t,this},i}),/**
 * lunr - http://lunrjs.com - A bit like Solr, but much smaller and not as bright - 0.7.2
 * Copyright (C) 2016 Oliver Nightingale
 * @license MIT
 */
!function(){var t=function(e){var r=new t.Index;return r.pipeline.add(t.trimmer,t.stopWordFilter,t.stemmer),e&&e.call(r,r),r};t.version="0.7.2",t.utils={},t.utils.warn=function(t){return function(e){t.console&&console.warn&&console.warn(e)}}(this),t.utils.asString=function(t){return void 0===t||null===t?"":t.toString()},t.EventEmitter=function(){this.events={}},t.EventEmitter.prototype.addListener=function(){var t=Array.prototype.slice.call(arguments),e=t.pop(),r=t;if("function"!=typeof e)throw new TypeError("last argument must be a function");r.forEach(function(t){this.hasHandler(t)||(this.events[t]=[]),this.events[t].push(e)},this)},t.EventEmitter.prototype.removeListener=function(t,e){if(this.hasHandler(t)){var r=this.events[t].indexOf(e);this.events[t].splice(r,1),this.events[t].length||delete this.events[t]}},t.EventEmitter.prototype.emit=function(t){if(this.hasHandler(t)){var e=Array.prototype.slice.call(arguments,1);this.events[t].forEach(function(t){t.apply(void 0,e)})}},t.EventEmitter.prototype.hasHandler=function(t){return t in this.events},t.tokenizer=function(e){if(!arguments.length||null==e||void 0==e)return[];if(Array.isArray(e))return e.map(function(e){return t.utils.asString(e).toLowerCase()});var r=t.tokenizer.seperator||t.tokenizer.separator;return e.toString().trim().toLowerCase().split(r)},t.tokenizer.seperator=!1,t.tokenizer.separator=/[\s\-]+/,t.tokenizer.load=function(t){var e=this.registeredFunctions[t];if(!e)throw new Error("Cannot load un-registered function: "+t);return e},t.tokenizer.label="default",t.tokenizer.registeredFunctions={"default":t.tokenizer},t.tokenizer.registerFunction=function(e,r){r in this.registeredFunctions&&t.utils.warn("Overwriting existing tokenizer: "+r),e.label=r,this.registeredFunctions[r]=e},t.Pipeline=function(){this._stack=[]},t.Pipeline.registeredFunctions={},t.Pipeline.registerFunction=function(e,r){r in this.registeredFunctions&&t.utils.warn("Overwriting existing registered function: "+r),e.label=r,t.Pipeline.registeredFunctions[e.label]=e},t.Pipeline.warnIfFunctionNotRegistered=function(e){var r=e.label&&e.label in this.registeredFunctions;r||t.utils.warn("Function is not registered with pipeline. This may cause problems when serialising the index.\n",e)},t.Pipeline.load=function(e){var r=new t.Pipeline;return e.forEach(function(e){var n=t.Pipeline.registeredFunctions[e];if(!n)throw new Error("Cannot load un-registered function: "+e);r.add(n)}),r},t.Pipeline.prototype.add=function(){var e=Array.prototype.slice.call(arguments);e.forEach(function(e){t.Pipeline.warnIfFunctionNotRegistered(e),this._stack.push(e)},this)},t.Pipeline.prototype.after=function(e,r){t.Pipeline.warnIfFunctionNotRegistered(r);var n=this._stack.indexOf(e);if(-1==n)throw new Error("Cannot find existingFn");n+=1,this._stack.splice(n,0,r)},t.Pipeline.prototype.before=function(e,r){t.Pipeline.warnIfFunctionNotRegistered(r);var n=this._stack.indexOf(e);if(-1==n)throw new Error("Cannot find existingFn");this._stack.splice(n,0,r)},t.Pipeline.prototype.remove=function(t){var e=this._stack.indexOf(t);-1!=e&&this._stack.splice(e,1)},t.Pipeline.prototype.run=function(t){for(var e=[],r=t.length,n=this._stack.length,i=0;r>i;i++){for(var s=t[i],o=0;n>o&&(s=this._stack[o](s,i,t),void 0!==s&&""!==s);o++);void 0!==s&&""!==s&&e.push(s)}return e},t.Pipeline.prototype.reset=function(){this._stack=[]},t.Pipeline.prototype.toJSON=function(){return this._stack.map(function(e){return t.Pipeline.warnIfFunctionNotRegistered(e),e.label})},t.Vector=function(){this._magnitude=null,this.list=void 0,this.length=0},t.Vector.Node=function(t,e,r){this.idx=t,this.val=e,this.next=r},t.Vector.prototype.insert=function(e,r){this._magnitude=void 0;var n=this.list;if(!n)return this.list=new t.Vector.Node(e,r,n),this.length++;if(e<n.idx)return this.list=new t.Vector.Node(e,r,n),this.length++;for(var i=n,s=n.next;void 0!=s;){if(e<s.idx)return i.next=new t.Vector.Node(e,r,s),this.length++;i=s,s=s.next}return i.next=new t.Vector.Node(e,r,s),this.length++},t.Vector.prototype.magnitude=function(){if(this._magnitude)return this._magnitude;for(var t,e=this.list,r=0;e;)t=e.val,r+=t*t,e=e.next;return this._magnitude=Math.sqrt(r)},t.Vector.prototype.dot=function(t){for(var e=this.list,r=t.list,n=0;e&&r;)e.idx<r.idx?e=e.next:e.idx>r.idx?r=r.next:(n+=e.val*r.val,e=e.next,r=r.next);return n},t.Vector.prototype.similarity=function(t){return this.dot(t)/(this.magnitude()*t.magnitude())},t.SortedSet=function(){this.length=0,this.elements=[]},t.SortedSet.load=function(t){var e=new this;return e.elements=t,e.length=t.length,e},t.SortedSet.prototype.add=function(){var t,e;for(t=0;t<arguments.length;t++)e=arguments[t],~this.indexOf(e)||this.elements.splice(this.locationFor(e),0,e);this.length=this.elements.length},t.SortedSet.prototype.toArray=function(){return this.elements.slice()},t.SortedSet.prototype.map=function(t,e){return this.elements.map(t,e)},t.SortedSet.prototype.forEach=function(t,e){return this.elements.forEach(t,e)},t.SortedSet.prototype.indexOf=function(t){for(var e=0,r=this.elements.length,n=r-e,i=e+Math.floor(n/2),s=this.elements[i];n>1;){if(s===t)return i;t>s&&(e=i),s>t&&(r=i),n=r-e,i=e+Math.floor(n/2),s=this.elements[i]}return s===t?i:-1},t.SortedSet.prototype.locationFor=function(t){for(var e=0,r=this.elements.length,n=r-e,i=e+Math.floor(n/2),s=this.elements[i];n>1;)t>s&&(e=i),s>t&&(r=i),n=r-e,i=e+Math.floor(n/2),s=this.elements[i];return s>t?i:t>s?i+1:void 0},t.SortedSet.prototype.intersect=function(e){for(var r=new t.SortedSet,n=0,i=0,s=this.length,o=e.length,a=this.elements,h=e.elements;!(n>s-1||i>o-1);)a[n]!==h[i]?a[n]<h[i]?n++:a[n]>h[i]&&i++:(r.add(a[n]),n++,i++);return r},t.SortedSet.prototype.clone=function(){var e=new t.SortedSet;return e.elements=this.toArray(),e.length=e.elements.length,e},t.SortedSet.prototype.union=function(t){var e,r,n;this.length>=t.length?(e=this,r=t):(e=t,r=this),n=e.clone();for(var i=0,s=r.toArray();i<s.length;i++)n.add(s[i]);return n},t.SortedSet.prototype.toJSON=function(){return this.toArray()},t.Index=function(){this._fields=[],this._ref="id",this.pipeline=new t.Pipeline,this.documentStore=new t.Store,this.tokenStore=new t.TokenStore,this.corpusTokens=new t.SortedSet,this.eventEmitter=new t.EventEmitter,this.tokenizerFn=t.tokenizer,this._idfCache={},this.on("add","remove","update",function(){this._idfCache={}}.bind(this))},t.Index.prototype.on=function(){var t=Array.prototype.slice.call(arguments);return this.eventEmitter.addListener.apply(this.eventEmitter,t)},t.Index.prototype.off=function(t,e){return this.eventEmitter.removeListener(t,e)},t.Index.load=function(e){e.version!==t.version&&t.utils.warn("version mismatch: current "+t.version+" importing "+e.version);var r=new this;return r._fields=e.fields,r._ref=e.ref,r.tokenizer(t.tokenizer.load(e.tokenizer)),r.documentStore=t.Store.load(e.documentStore),r.tokenStore=t.TokenStore.load(e.tokenStore),r.corpusTokens=t.SortedSet.load(e.corpusTokens),r.pipeline=t.Pipeline.load(e.pipeline),r},t.Index.prototype.field=function(t,e){var e=e||{},r={name:t,boost:e.boost||1};return this._fields.push(r),this},t.Index.prototype.ref=function(t){return this._ref=t,this},t.Index.prototype.tokenizer=function(e){var r=e.label&&e.label in t.tokenizer.registeredFunctions;return r||t.utils.warn("Function is not a registered tokenizer. This may cause problems when serialising the index"),this.tokenizerFn=e,this},t.Index.prototype.add=function(e,r){var n={},i=new t.SortedSet,s=e[this._ref],r=void 0===r||r;this._fields.forEach(function(t){var r=this.pipeline.run(this.tokenizerFn(e[t.name]));n[t.name]=r;for(var s=0;s<r.length;s++){var o=r[s];i.add(o),this.corpusTokens.add(o)}},this),this.documentStore.set(s,i);for(var o=0;o<i.length;o++){for(var a=i.elements[o],h=0,u=0;u<this._fields.length;u++){var p=this._fields[u],c=n[p.name],l=c.length;if(l){for(var d=0,f=0;l>f;f++)c[f]===a&&d++;h+=d/l*p.boost}}this.tokenStore.add(a,{ref:s,tf:h})}r&&this.eventEmitter.emit("add",e,this)},t.Index.prototype.remove=function(t,e){var r=t[this._ref],e=void 0===e||e;if(this.documentStore.has(r)){var n=this.documentStore.get(r);this.documentStore.remove(r),n.forEach(function(t){this.tokenStore.remove(t,r)},this),e&&this.eventEmitter.emit("remove",t,this)}},t.Index.prototype.update=function(t,e){var e=void 0===e||e;this.remove(t,!1),this.add(t,!1),e&&this.eventEmitter.emit("update",t,this)},t.Index.prototype.idf=function(t){var e="@"+t;if(Object.prototype.hasOwnProperty.call(this._idfCache,e))return this._idfCache[e];var r=this.tokenStore.count(t),n=1;return r>0&&(n=1+Math.log(this.documentStore.length/r)),this._idfCache[e]=n},t.Index.prototype.search=function(e){var r=this.pipeline.run(this.tokenizerFn(e)),n=new t.Vector,i=[],s=this._fields.reduce(function(t,e){return t+e.boost},0),o=r.some(function(t){return this.tokenStore.has(t)},this);if(!o)return[];r.forEach(function(e,r,o){var a=1/o.length*this._fields.length*s,h=this,u=this.tokenStore.expand(e).reduce(function(r,i){var s=h.corpusTokens.indexOf(i),o=h.idf(i),u=1,p=new t.SortedSet;if(i!==e){var c=Math.max(3,i.length-e.length);u=1/Math.log(c)}s>-1&&n.insert(s,a*o*u);for(var l=h.tokenStore.get(i),d=Object.keys(l),f=d.length,m=0;f>m;m++)p.add(l[d[m]].ref);return r.union(p)},new t.SortedSet);i.push(u)},this);var a=i.reduce(function(t,e){return t.intersect(e)});return a.map(function(t){return{ref:t,score:n.similarity(this.documentVector(t))}},this).sort(function(t,e){return e.score-t.score})},t.Index.prototype.documentVector=function(e){for(var r=this.documentStore.get(e),n=r.length,i=new t.Vector,s=0;n>s;s++){var o=r.elements[s],a=this.tokenStore.get(o)[e].tf,h=this.idf(o);i.insert(this.corpusTokens.indexOf(o),a*h)}return i},t.Index.prototype.toJSON=function(){return{version:t.version,fields:this._fields,ref:this._ref,tokenizer:this.tokenizerFn.label,documentStore:this.documentStore.toJSON(),tokenStore:this.tokenStore.toJSON(),corpusTokens:this.corpusTokens.toJSON(),pipeline:this.pipeline.toJSON()}},t.Index.prototype.use=function(t){var e=Array.prototype.slice.call(arguments,1);e.unshift(this),t.apply(this,e)},t.Store=function(){this.store={},this.length=0},t.Store.load=function(e){var r=new this;return r.length=e.length,r.store=Object.keys(e.store).reduce(function(r,n){return r[n]=t.SortedSet.load(e.store[n]),r},{}),r},t.Store.prototype.set=function(t,e){this.has(t)||this.length++,this.store[t]=e},t.Store.prototype.get=function(t){return this.store[t]},t.Store.prototype.has=function(t){return t in this.store},t.Store.prototype.remove=function(t){this.has(t)&&(delete this.store[t],this.length--)},t.Store.prototype.toJSON=function(){return{store:this.store,length:this.length}},t.stemmer=function(){var t={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},e={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},r="[^aeiou]",n="[aeiouy]",i=r+"[^aeiouy]*",s=n+"[aeiou]*",o="^("+i+")?"+s+i,a="^("+i+")?"+s+i+"("+s+")?$",h="^("+i+")?"+s+i+s+i,u="^("+i+")?"+n,p=new RegExp(o),c=new RegExp(h),l=new RegExp(a),d=new RegExp(u),f=/^(.+?)(ss|i)es$/,m=/^(.+?)([^s])s$/,y=/^(.+?)eed$/,g=/^(.+?)(ed|ing)$/,v=/.$/,_=/(at|bl|iz)$/,b=new RegExp("([^aeiouylsz])\\1$"),w=new RegExp("^"+i+n+"[^aeiouwxy]$"),S=/^(.+?[^aeiou])y$/,x=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,A=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,k=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,P=/^(.+?)(s|t)(ion)$/,E=/^(.+?)e$/,T=/ll$/,Q=new RegExp("^"+i+n+"[^aeiouwxy]$"),F=function(r){var n,i,s,o,a,h,u;if(r.length<3)return r;if(s=r.substr(0,1),"y"==s&&(r=s.toUpperCase()+r.substr(1)),o=f,a=m,o.test(r)?r=r.replace(o,"$1$2"):a.test(r)&&(r=r.replace(a,"$1$2")),o=y,a=g,o.test(r)){var F=o.exec(r);o=p,o.test(F[1])&&(o=v,r=r.replace(o,""))}else if(a.test(r)){var F=a.exec(r);n=F[1],a=d,a.test(n)&&(r=n,a=_,h=b,u=w,a.test(r)?r+="e":h.test(r)?(o=v,r=r.replace(o,"")):u.test(r)&&(r+="e"))}if(o=S,o.test(r)){var F=o.exec(r);n=F[1],r=n+"i"}if(o=x,o.test(r)){var F=o.exec(r);n=F[1],i=F[2],o=p,o.test(n)&&(r=n+t[i])}if(o=A,o.test(r)){var F=o.exec(r);n=F[1],i=F[2],o=p,o.test(n)&&(r=n+e[i])}if(o=k,a=P,o.test(r)){var F=o.exec(r);n=F[1],o=c,o.test(n)&&(r=n)}else if(a.test(r)){var F=a.exec(r);n=F[1]+F[2],a=c,a.test(n)&&(r=n)}if(o=E,o.test(r)){var F=o.exec(r);n=F[1],o=c,a=l,h=Q,(o.test(n)||a.test(n)&&!h.test(n))&&(r=n)}return o=T,a=c,o.test(r)&&a.test(r)&&(o=v,r=r.replace(o,"")),"y"==s&&(r=s.toLowerCase()+r.substr(1)),r};return F}(),t.Pipeline.registerFunction(t.stemmer,"stemmer"),t.generateStopWordFilter=function(t){var e=t.reduce(function(t,e){return t[e]=e,t},{});return function(t){return t&&e[t]!==t?t:void 0}},t.stopWordFilter=t.generateStopWordFilter(["a","able","about","across","after","all","almost","also","am","among","an","and","any","are","as","at","be","because","been","but","by","can","cannot","could","dear","did","do","does","either","else","ever","every","for","from","get","got","had","has","have","he","her","hers","him","his","how","however","i","if","in","into","is","it","its","just","least","let","like","likely","may","me","might","most","must","neither","no","nor","not","of","off","often","on","only","or","other","our","own","rather","said","say","says","she","should","since","so","some","than","that","the","their","them","then","there","these","they","this","tis","to","too","twas","us","wants","was","we","were","what","when","where","which","while","who","whom","why","will","with","would","yet","you","your"]),t.Pipeline.registerFunction(t.stopWordFilter,"stopWordFilter"),t.trimmer=function(t){return t.replace(/^\W+/,"").replace(/\W+$/,"")},t.Pipeline.registerFunction(t.trimmer,"trimmer"),t.TokenStore=function(){this.root={docs:{}},this.length=0},t.TokenStore.load=function(t){var e=new this;return e.root=t.root,e.length=t.length,e},t.TokenStore.prototype.add=function(t,e,r){var r=r||this.root,n=t.charAt(0),i=t.slice(1);return n in r||(r[n]={docs:{}}),0===i.length?(r[n].docs[e.ref]=e,void(this.length+=1)):this.add(i,e,r[n])},t.TokenStore.prototype.has=function(t){if(!t)return!1;for(var e=this.root,r=0;r<t.length;r++){if(!e[t.charAt(r)])return!1;e=e[t.charAt(r)]}return!0},t.TokenStore.prototype.getNode=function(t){if(!t)return{};for(var e=this.root,r=0;r<t.length;r++){if(!e[t.charAt(r)])return{};e=e[t.charAt(r)]}return e},t.TokenStore.prototype.get=function(t,e){return this.getNode(t,e).docs||{}},t.TokenStore.prototype.count=function(t,e){return Object.keys(this.get(t,e)).length},t.TokenStore.prototype.remove=function(t,e){if(t){for(var r=this.root,n=0;n<t.length;n++){if(!(t.charAt(n)in r))return;r=r[t.charAt(n)]}delete r.docs[e]}},t.TokenStore.prototype.expand=function(t,e){var r=this.getNode(t),n=r.docs||{},e=e||[];return Object.keys(n).length&&e.push(t),Object.keys(r).forEach(function(r){"docs"!==r&&e.concat(this.expand(t+r,e))},this),e},t.TokenStore.prototype.toJSON=function(){return{root:this.root,length:this.length}},function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e():t.lunr=e()}(this,function(){return t})}(),function(t){var e=function(t){var e,r=Array.prototype.slice;return function(){var n=r.call(arguments),i=this;clearTimeout(e),e=setTimeout(function(){t.apply(i,n)},100)}},r=function(t){var e=t.match(/(\d+)/g);return new Date(e[0],e[1]-1,e[2])},n=function(){function n(e,r){this.$elem=e,this.$results=t(r.results),this.indexDataUrl=r.indexUrl,this.template=this.compileTemplate(t(r.template)),this.titleMsg=r.titleMsg,this.emptyMsg=r.emptyMsg,this.initialize()}return n.prototype.initialize=function(){var e=this;this.loadIndexData(function(r){e.entries=t.map(r.docs,e.createEntry),e.index=lunr.Index.load(r.index),e.populateSearchFromQuery(),e.bindKeypress()})},n.prototype.compileTemplate=function(t){var e=t.text();return Mustache.parse(e),function(t,r){return Mustache.render(e,t,r)}},n.prototype.loadIndexData=function(e){t.getJSON(this.indexDataUrl,e)},n.prototype.createEntry=function(e,n){var i=t.extend({id:n+1},e);return e.date&&t.extend(i,{date:r(e.date),pubdate:function(){return dateFormat(r(e.date),"yyyy-mm-dd")},displaydate:function(){return dateFormat(r(e.date),"mmm dd, yyyy")}}),i},n.prototype.bindKeypress=function(){var t=this,r=this.$elem.val();this.$elem.bind("keyup",e(function(){var e=t.$elem.val();e!==r&&t.search(e),r=e}))},n.prototype.search=function(e){var r=this.entries;if(e.length<3)this.$results.hide().empty();else{var n=t.map(this.index.search(e),function(e){return t.grep(r,function(t){return t.id===parseInt(e.ref,10)})[0]});this.displayResults(n)}},n.prototype.displayResults=function(t){var e=this.$results;e.empty(),0===t.length?e.append(this.emptyMsg):(this.titleMsg&&0!==this.titleMsg.length&&e.append(this.titleMsg),e.append(this.template({entries:t}))),e.show()},n.prototype.populateSearchFromQuery=function(){var t=new URI(window.location.search.toString()),e=t.search(!0);e.hasOwnProperty("q")&&(this.$elem.val(e.q),this.search(e.q.toString()))},n}();t.fn.lunrSearch=function(e){return e=t.extend({},t.fn.lunrSearch.defaults,e),new n(this,e),this},t.fn.lunrSearch.defaults={indexUrl:"/js/index.json",results:"#search-results",template:"#search-results-template",titleMsg:"<h1>Search results<h1>",emptyMsg:"<p>Nothing found.</p>"}}(jQuery);
